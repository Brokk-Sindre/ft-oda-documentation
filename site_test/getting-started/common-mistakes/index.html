<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Common Mistakes to Avoid - Test</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Test</a>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#common-mistakes-to-avoid" class="nav-link">Common Mistakes to Avoid</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#1-url-encoding-issues-most-critical" class="nav-link">1. URL Encoding Issues (Most Critical)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#2-pagination-misunderstandings" class="nav-link">2. Pagination Misunderstandings</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#3-silent-filter-failures" class="nav-link">3. Silent Filter Failures</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#4-performance-mistakes" class="nav-link">4. Performance Mistakes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#5-date-and-time-errors" class="nav-link">5. Date and Time Errors</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#6-danish-character-issues" class="nav-link">6. Danish Character Issues</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#7-boolean-logic-errors" class="nav-link">7. Boolean Logic Errors</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#8-error-handling-mistakes" class="nav-link">8. Error Handling Mistakes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#9-write-operation-mistakes" class="nav-link">9. Write Operation Mistakes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#10-relationship-expansion-mistakes" class="nav-link">10. Relationship Expansion Mistakes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#11-caching-and-data-freshness-mistakes" class="nav-link">11. Caching and Data Freshness Mistakes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#12-data-type-assumptions" class="nav-link">12. Data Type Assumptions</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#quick-debugging-checklist" class="nav-link">Quick Debugging Checklist</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#testing-strategy" class="nav-link">Testing Strategy</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="common-mistakes-to-avoid">Common Mistakes to Avoid</h1>
<p>Learn from the most frequent errors developers make when using the Danish Parliament API, so you can avoid them entirely.</p>
<h2 id="1-url-encoding-issues-most-critical">1. URL Encoding Issues (Most Critical)</h2>
<h3 id="l-the-1-mistake-using-instead-of-24">L The #1 Mistake: Using $ Instead of %24</h3>
<p>This is by far the most common error:</p>
<pre><code class="language-bash"># L WRONG - Will cause HTTP 400 or shell errors
curl &quot;https://oda.ft.dk/api/Sag?$top=5&quot;

#  CORRECT - Always use %24
curl &quot;https://oda.ft.dk/api/Sag?%24top=5&quot;
</code></pre>
<p><strong>Why this happens:</strong>
- <code>$</code> has special meaning in URLs and shells
- Must be URL encoded as <code>%24</code>
- Shell interprets <code>$top</code> as a variable name</p>
<h3 id="l-missing-space-encoding">L Missing Space Encoding</h3>
<pre><code class="language-bash"># L WRONG - Spaces break the query
curl &quot;https://oda.ft.dk/api/Sag?%24filter=id eq 1&quot;

#  CORRECT - Spaces become %20
curl &quot;https://oda.ft.dk/api/Sag?%24filter=id%20eq%201&quot;
</code></pre>
<h2 id="2-pagination-misunderstandings">2. Pagination Misunderstandings</h2>
<h3 id="l-assuming-1000-record-limit">L Assuming 1000 Record Limit</h3>
<pre><code class="language-bash"># L WRONG - API now limits to 100 records max
curl &quot;https://oda.ft.dk/api/Sag?%24top=1000&quot;

#  CORRECT - Use maximum of 100
curl &quot;https://oda.ft.dk/api/Sag?%24top=100&quot;
</code></pre>
<p><strong>Updated Finding:</strong> The API now has a hard limit of 100 records per request, not 1000 as previously documented.</p>
<h3 id="l-not-using-pagination-for-large-datasets">L Not Using Pagination for Large Datasets</h3>
<pre><code class="language-python"># L WRONG - Trying to get all data at once
response = requests.get(&quot;https://oda.ft.dk/api/Sag?%24top=100000&quot;)

#  CORRECT - Paginate through results
def get_all_cases():
    skip = 0
    all_cases = []
    while True:
        response = requests.get(f&quot;https://oda.ft.dk/api/Sag?%24skip={skip}&amp;%24top=100&quot;)
        data = response.json()
        if not data['value']:
            break
        all_cases.extend(data['value'])
        skip += 100
    return all_cases
</code></pre>
<h2 id="3-silent-filter-failures">3. Silent Filter Failures</h2>
<h3 id="l-invalid-field-names-return-all-data">L Invalid Field Names Return All Data</h3>
<p>This is a particularly dangerous mistake:</p>
<pre><code class="language-bash"># L WRONG - Typo in field name, but NO ERROR returned
curl &quot;https://oda.ft.dk/api/Sag?%24filter=tittel%20eq%20'test'&quot;  # 'tittel' should be 'titel'

# Result: Returns ALL records instead of filtered results!
</code></pre>
<p><strong>Critical Problem:</strong> Invalid filter field names don't produce errors. They silently return all data, which can:
- Overwhelm your application
- Cause performance issues
- Lead to incorrect analysis</p>
<p><strong> Solution:</strong> Always test filters with <code>%24top=1</code> first:</p>
<pre><code class="language-bash"># Test your filter syntax first
curl &quot;https://oda.ft.dk/api/Sag?%24filter=titel%20eq%20'test'&amp;%24top=1&quot;
</code></pre>
<h2 id="4-performance-mistakes">4. Performance Mistakes</h2>
<h3 id="l-requesting-everything-when-you-need-little">L Requesting Everything When You Need Little</h3>
<pre><code class="language-bash"># L WRONG - Gets all fields for all expansions
curl &quot;https://oda.ft.dk/api/Sag?%24expand=SagAktør/Aktør&amp;%24top=100&quot;

#  CORRECT - Select only needed fields
curl &quot;https://oda.ft.dk/api/Sag?%24select=titel,SagAktør/Aktør/navn&amp;%24expand=SagAktør/Aktør&amp;%24top=100&quot;
</code></pre>
<h3 id="l-not-using-field-selection">L Not Using Field Selection</h3>
<pre><code class="language-python"># L WRONG - Downloads unnecessary data
response = requests.get(&quot;https://oda.ft.dk/api/Sag?%24top=100&quot;)

#  CORRECT - Only get what you need
response = requests.get(&quot;https://oda.ft.dk/api/Sag?%24select=id,titel,opdateringsdato&amp;%24top=100&quot;)
</code></pre>
<h2 id="5-date-and-time-errors">5. Date and Time Errors</h2>
<h3 id="l-wrong-date-function-syntax">L Wrong Date Function Syntax</h3>
<pre><code class="language-bash"># L WRONG - Missing parentheses
curl &quot;https://oda.ft.dk/api/Sag?%24filter=year opdateringsdato eq 2025&quot;

#  CORRECT - Proper function syntax
curl &quot;https://oda.ft.dk/api/Sag?%24filter=year(opdateringsdato)%20eq%202025&quot;
</code></pre>
<h3 id="l-incorrect-datetime-format">L Incorrect DateTime Format</h3>
<pre><code class="language-bash"># L WRONG - Missing 'datetime' wrapper
curl &quot;https://oda.ft.dk/api/Sag?%24filter=opdateringsdato%20gt%20'2025-09-09'&quot;

#  CORRECT - Proper datetime format
curl &quot;https://oda.ft.dk/api/Sag?%24filter=opdateringsdato%20gt%20datetime'2025-09-09T00:00:00'&quot;
</code></pre>
<h2 id="6-danish-character-issues">6. Danish Character Issues</h2>
<h3 id="l-not-encoding-danish-characters">L Not Encoding Danish Characters</h3>
<pre><code class="language-bash"># L WRONG - Direct Danish characters may cause issues
curl &quot;https://oda.ft.dk/api/Aktør?%24filter=substringof('ø',navn)&quot;

#  CORRECT - Properly encoded
curl &quot;https://oda.ft.dk/api/Akt%C3%B8r?%24filter=substringof('%C3%B8',navn)&quot;
</code></pre>
<h3 id="l-wrong-entity-name-encoding">L Wrong Entity Name Encoding</h3>
<pre><code class="language-bash"># L WRONG - Entity name not encoded
curl &quot;https://oda.ft.dk/api/Aktør&quot;  # May work but inconsistent

#  CORRECT - Consistently encoded
curl &quot;https://oda.ft.dk/api/Akt%C3%B8r&quot;
</code></pre>
<h2 id="7-boolean-logic-errors">7. Boolean Logic Errors</h2>
<h3 id="l-wrong-operator-precedence">L Wrong Operator Precedence</h3>
<pre><code class="language-bash"># L WRONG - Ambiguous logic
curl &quot;https://oda.ft.dk/api/Sag?%24filter=typeid%20eq%201%20or%20typeid%20eq%202%20and%20statusid%20eq%203&quot;

#  CORRECT - Clear parentheses
curl &quot;https://oda.ft.dk/api/Sag?%24filter=%28typeid%20eq%201%20or%20typeid%20eq%202%29%20and%20statusid%20eq%203&quot;
</code></pre>
<h2 id="8-error-handling-mistakes">8. Error Handling Mistakes</h2>
<h3 id="l-not-checking-http-status-codes">L Not Checking HTTP Status Codes</h3>
<pre><code class="language-python"># L WRONG - Assumes request always succeeds
response = requests.get(url)
data = response.json()  # May crash if HTTP error

#  CORRECT - Proper error handling
response = requests.get(url)
response.raise_for_status()  # Raises exception for HTTP errors
data = response.json()
</code></pre>
<h3 id="l-not-handling-empty-results">L Not Handling Empty Results</h3>
<pre><code class="language-python"># L WRONG - Assumes data always exists
first_case = response.json()['value'][0]  # May crash if empty

#  CORRECT - Check for empty results
data = response.json()
if data['value']:
    first_case = data['value'][0]
else:
    print(&quot;No results found&quot;)
</code></pre>
<h2 id="9-write-operation-mistakes">9. Write Operation Mistakes</h2>
<h3 id="l-attempting-write-operations">L Attempting Write Operations</h3>
<pre><code class="language-bash"># L WRONG - API is read-only, will return HTTP 501
curl -X POST &quot;https://oda.ft.dk/api/Sag&quot; -d '{&quot;titel&quot;:&quot;test&quot;}'

#  CORRECT - Only use GET requests
curl &quot;https://oda.ft.dk/api/Sag?%24top=5&quot;
</code></pre>
<p><strong>Important:</strong> The API is completely read-only. All POST, PUT, PATCH, DELETE operations return HTTP 501.</p>
<h2 id="10-relationship-expansion-mistakes">10. Relationship Expansion Mistakes</h2>
<h3 id="l-too-many-levels-of-expansion">L Too Many Levels of Expansion</h3>
<pre><code class="language-bash"># L WRONG - May cause performance issues or timeouts
curl &quot;https://oda.ft.dk/api/Sag?%24expand=SagAktør/Aktør/AktørAktør/Aktør&quot;

#  CORRECT - Limit expansion depth
curl &quot;https://oda.ft.dk/api/Sag?%24expand=SagAktør/Aktør&amp;%24top=10&quot;
</code></pre>
<h2 id="11-caching-and-data-freshness-mistakes">11. Caching and Data Freshness Mistakes</h2>
<h3 id="l-over-caching-dynamic-data">L Over-Caching Dynamic Data</h3>
<pre><code class="language-python"># L WRONG - Caching for too long
@cache(timeout=3600*24)  # 24 hours is too long
def get_recent_cases():
    return api.get(&quot;Sag?%24filter=year(opdateringsdato)%20eq%202025&quot;)

#  CORRECT - Shorter cache for fresh data
@cache(timeout=300)  # 5 minutes for recent data
def get_recent_cases():
    return api.get(&quot;Sag?%24filter=year(opdateringsdato)%20eq%202025&quot;)
</code></pre>
<h2 id="12-data-type-assumptions">12. Data Type Assumptions</h2>
<h3 id="l-assuming-fields-are-always-present">L Assuming Fields Are Always Present</h3>
<pre><code class="language-python"># L WRONG - Field may be null/missing
title = case['titel'].lower()  # May crash if titel is null

#  CORRECT - Handle null values
title = (case.get('titel') or '').lower()
</code></pre>
<h2 id="quick-debugging-checklist">Quick Debugging Checklist</h2>
<p>When something doesn't work:</p>
<ol>
<li><strong>Check URL encoding</strong> - Are you using <code>%24</code> instead of <code>$</code>?</li>
<li><strong>Test with %24top=1</strong> - Does a simple query work?</li>
<li><strong>Verify field names</strong> - Are you using the correct Danish field names?</li>
<li><strong>Check HTTP status</strong> - Is the server returning 200 OK?</li>
<li><strong>Test incrementally</strong> - Start simple, add complexity gradually</li>
<li><strong>Use browser dev tools</strong> - Check the actual HTTP requests being sent</li>
</ol>
<h2 id="testing-strategy">Testing Strategy</h2>
<p>Always test your queries incrementally:</p>
<pre><code class="language-bash"># Step 1: Basic query
curl &quot;https://oda.ft.dk/api/Sag?%24top=1&quot;

# Step 2: Add filter
curl &quot;https://oda.ft.dk/api/Sag?%24filter=id%20eq%201&amp;%24top=1&quot;

# Step 3: Add expansion
curl &quot;https://oda.ft.dk/api/Sag?%24expand=Sagskategori&amp;%24filter=id%20eq%201&amp;%24top=1&quot;

# Step 4: Add selection
curl &quot;https://oda.ft.dk/api/Sag?%24select=titel,Sagskategori/kategori&amp;%24expand=Sagskategori&amp;%24filter=id%20eq%201&amp;%24top=1&quot;
</code></pre>
<p>Remember: The Danish Parliament API is very forgiving in some ways (no authentication) but strict in others (URL encoding). Taking time to understand these common mistakes will save you hours of debugging!</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
