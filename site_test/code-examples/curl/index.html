<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>cURL Examples - Test</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Test</a>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#curl-examples" class="nav-link">cURL Examples</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#overview" class="nav-link">Overview</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#quick-start" class="nav-link">Quick Start</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#critical-url-encoding" class="nav-link">Critical: URL Encoding</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#quick-reference" class="nav-link">Quick Reference</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#examples-by-category" class="nav-link">Examples by Category</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#common-patterns" class="nav-link">Common Patterns</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#useful-curl-options" class="nav-link">Useful cURL Options</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#json-processing-with-jq" class="nav-link">JSON Processing with jq</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#shell-scripting-examples" class="nav-link">Shell Scripting Examples</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#error-handling" class="nav-link">Error Handling</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#advanced-use-cases" class="nav-link">Advanced Use Cases</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#performance-tips" class="nav-link">Performance Tips</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#security-notes" class="nav-link">Security Notes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#next-steps" class="nav-link">Next Steps</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="curl-examples">cURL Examples</h1>
<p>Comprehensive command-line examples for accessing the Danish Parliament API using cURL. Perfect for testing, scripting, and command-line tools.</p>
<h2 id="overview">Overview</h2>
<p>The Danish Parliament API is ideal for cURL usage because:
- <strong>No authentication required</strong> - Direct access without API keys
- <strong>CORS enabled</strong> - Works from any environment
- <strong>Standard HTTP/JSON</strong> - Simple request/response patterns
- <strong>Rich OData support</strong> - Powerful query capabilities</p>
<h2 id="quick-start">Quick Start</h2>
<pre><code class="language-bash"># Basic API test - get 5 recent cases
curl &quot;https://oda.ft.dk/api/Sag?%24top=5&quot;

# Pretty print JSON (if you have jq)
curl -s &quot;https://oda.ft.dk/api/Sag?%24top=5&quot; | jq '.'

# Get total count of cases
curl -s &quot;https://oda.ft.dk/api/Sag?%24inlinecount=allpages&amp;%24top=1&quot; | jq '.&quot;odata.count&quot;'
</code></pre>
<h2 id="critical-url-encoding">Critical: URL Encoding</h2>
<p><strong>The #1 mistake developers make</strong>: Always use <code>%24</code> instead of <code>$</code> in URLs.</p>
<pre><code class="language-bash"># L WRONG - This will not work
curl &quot;https://oda.ft.dk/api/Sag?$top=5&quot;

#  CORRECT - Always encode $ as %24
curl &quot;https://oda.ft.dk/api/Sag?%24top=5&quot;

# Or use proper shell escaping (bash/zsh)
curl &quot;https://oda.ft.dk/api/Sag?\$top=5&quot;
</code></pre>
<h2 id="quick-reference">Quick Reference</h2>
<table>
<thead>
<tr>
<th>Purpose</th>
<th>Entity</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cases/Bills</td>
<td><code>Sag</code></td>
<td><code>curl "https://oda.ft.dk/api/Sag?%24top=10"</code></td>
</tr>
<tr>
<td>Politicians</td>
<td><code>Aktør</code></td>
<td><code>curl "https://oda.ft.dk/api/Aktør?%24top=10"</code></td>
</tr>
<tr>
<td>Votes</td>
<td><code>Afstemning</code></td>
<td><code>curl "https://oda.ft.dk/api/Afstemning?%24top=5"</code></td>
</tr>
<tr>
<td>Individual Votes</td>
<td><code>Stemme</code></td>
<td><code>curl "https://oda.ft.dk/api/Stemme?%24top=5"</code></td>
</tr>
<tr>
<td>Documents</td>
<td><code>Dokument</code></td>
<td><code>curl "https://oda.ft.dk/api/Dokument?%24top=5"</code></td>
</tr>
<tr>
<td>Meetings</td>
<td><code>Møde</code></td>
<td><code>curl "https://oda.ft.dk/api/Møde?%24top=5"</code></td>
</tr>
</tbody>
</table>
<h2 id="examples-by-category">Examples by Category</h2>
<ol>
<li><strong><a href="basic-queries/">Basic Queries</a></strong> - Essential cURL patterns</li>
<li><strong><a href="testing/">Testing Commands</a></strong> - API health checks and diagnostics</li>
</ol>
<h2 id="common-patterns">Common Patterns</h2>
<h3 id="search-and-filter">Search and Filter</h3>
<pre><code class="language-bash"># Search for climate legislation
curl &quot;https://oda.ft.dk/api/Sag?%24filter=substringof('klima',%20titel)&quot;

# Cases updated in 2025
curl &quot;https://oda.ft.dk/api/Sag?%24filter=year(opdateringsdato)%20eq%202025&quot;

# Recent activity (last 24 hours)
curl &quot;https://oda.ft.dk/api/Sag?%24filter=opdateringsdato%20gt%20datetime'2025-09-08T00:00:00'&quot;
</code></pre>
<h3 id="pagination">Pagination</h3>
<pre><code class="language-bash"># First page (records 1-100)
curl &quot;https://oda.ft.dk/api/Sag?%24top=100&amp;%24skip=0&quot;

# Second page (records 101-200)
curl &quot;https://oda.ft.dk/api/Sag?%24top=100&amp;%24skip=100&quot;

# Get total count for pagination
curl &quot;https://oda.ft.dk/api/Sag?%24inlinecount=allpages&amp;%24top=1&quot; | jq '.&quot;odata.count&quot;'
</code></pre>
<h3 id="relationships">Relationships</h3>
<pre><code class="language-bash"># Get cases with categories
curl &quot;https://oda.ft.dk/api/Sag?%24expand=Sagskategori&amp;%24top=5&quot;

# Get voting with individual votes
curl &quot;https://oda.ft.dk/api/Afstemning?%24expand=Stemme&amp;%24top=1&quot;

# Deep expansion (2 levels)
curl &quot;https://oda.ft.dk/api/Afstemning?%24expand=Stemme/Aktør&amp;%24top=1&quot;
</code></pre>
<h2 id="useful-curl-options">Useful cURL Options</h2>
<pre><code class="language-bash"># Silent mode (no progress bar)
curl -s &quot;https://oda.ft.dk/api/Sag?%24top=1&quot;

# Include HTTP headers in output
curl -i &quot;https://oda.ft.dk/api/Sag?%24top=1&quot;

# Show only HTTP status code
curl -s -w &quot;%{http_code}&quot; -o /dev/null &quot;https://oda.ft.dk/api/Sag&quot;

# Timeout after 30 seconds
curl --max-time 30 &quot;https://oda.ft.dk/api/Sag?%24top=100&quot;

# Follow redirects
curl -L &quot;https://oda.ft.dk/api/Sag?%24top=1&quot;

# Save to file
curl -o cases.json &quot;https://oda.ft.dk/api/Sag?%24top=100&quot;
</code></pre>
<h2 id="json-processing-with-jq">JSON Processing with jq</h2>
<pre><code class="language-bash"># Extract just the titles
curl -s &quot;https://oda.ft.dk/api/Sag?%24top=5&quot; | jq '.value[].titel'

# Count records returned
curl -s &quot;https://oda.ft.dk/api/Sag?%24top=10&quot; | jq '.value | length'

# Get specific fields
curl -s &quot;https://oda.ft.dk/api/Sag?%24top=3&quot; | jq '.value[] | {id, titel, opdateringsdato}'

# Filter by field value
curl -s &quot;https://oda.ft.dk/api/Sag?%24top=20&quot; | jq '.value[] | select(.statusid == 3)'

# Sort by update date
curl -s &quot;https://oda.ft.dk/api/Sag?%24top=10&quot; | jq '.value | sort_by(.opdateringsdato) | reverse'
</code></pre>
<h2 id="shell-scripting-examples">Shell Scripting Examples</h2>
<h3 id="simple-monitoring-script">Simple monitoring script</h3>
<pre><code class="language-bash">#!/bin/bash

# Monitor recent parliamentary activity
echo &quot;Recent Parliamentary Activity (Last 4 hours):&quot;

CUTOFF=$(date -d '4 hours ago' -u +%Y-%m-%dT%H:%M:%S)
RECENT=$(curl -s &quot;https://oda.ft.dk/api/Sag?%24filter=opdateringsdato%20gt%20datetime'${CUTOFF}'&amp;%24top=10&quot;)

echo &quot;$RECENT&quot; | jq -r '.value[] | &quot;\(.id): \(.titel[0:60])... (Updated: \(.opdateringsdato))&quot;'
</code></pre>
<h3 id="batch-data-collection">Batch data collection</h3>
<pre><code class="language-bash">#!/bin/bash

# Collect climate legislation data
TOPICS=(&quot;klima&quot; &quot;miljø&quot; &quot;energi&quot; &quot;bæredygtig&quot;)
OUTPUT_DIR=&quot;parliamentary_data&quot;
mkdir -p &quot;$OUTPUT_DIR&quot;

for topic in &quot;${TOPICS[@]}&quot;; do
    echo &quot;Collecting data for: $topic&quot;

    curl -s &quot;https://oda.ft.dk/api/Sag?%24filter=substringof('${topic}',%20titel)&amp;%24top=100&quot; \
        &gt; &quot;${OUTPUT_DIR}/${topic}_cases.json&quot;

    # Count results
    COUNT=$(cat &quot;${OUTPUT_DIR}/${topic}_cases.json&quot; | jq '.value | length')
    echo &quot;Found $COUNT cases for $topic&quot;

    # Be respectful to the API
    sleep 1
done
</code></pre>
<h2 id="error-handling">Error Handling</h2>
<pre><code class="language-bash"># Check for HTTP errors
response=$(curl -s -w &quot;HTTPSTATUS:%{http_code}&quot; &quot;https://oda.ft.dk/api/InvalidEntity&quot;)
http_code=$(echo &quot;$response&quot; | grep -o &quot;HTTPSTATUS:.*&quot; | cut -d: -f2)

if [ &quot;$http_code&quot; -eq 200 ]; then
    echo &quot;Success&quot;
    echo &quot;$response&quot; | sed 's/HTTPSTATUS:.*$//'
else
    echo &quot;HTTP Error: $http_code&quot;
fi

# Retry on failure
max_attempts=3
attempt=1

while [ $attempt -le $max_attempts ]; do
    response=$(curl -s --max-time 30 &quot;https://oda.ft.dk/api/Sag?%24top=1&quot;)

    if [ $? -eq 0 ]; then
        echo &quot;Success on attempt $attempt&quot;
        break
    else
        echo &quot;Attempt $attempt failed, retrying...&quot;
        sleep $((attempt * 2))  # Exponential backoff
        ((attempt++))
    fi
done
</code></pre>
<h2 id="advanced-use-cases">Advanced Use Cases</h2>
<h3 id="parliamentary-activity-dashboard">Parliamentary Activity Dashboard</h3>
<pre><code class="language-bash">#!/bin/bash

echo &quot;=== Danish Parliament Activity Dashboard ===&quot;
echo

# Total statistics
echo &quot;=Ê Overall Statistics:&quot;
TOTAL_CASES=$(curl -s &quot;https://oda.ft.dk/api/Sag?%24inlinecount=allpages&amp;%24top=1&quot; | jq -r '.&quot;odata.count&quot;')
TOTAL_ACTORS=$(curl -s &quot;https://oda.ft.dk/api/Aktør?%24inlinecount=allpages&amp;%24top=1&quot; | jq -r '.&quot;odata.count&quot;')
echo &quot;  Total Cases: ${TOTAL_CASES}&quot;
echo &quot;  Total Actors: ${TOTAL_ACTORS}&quot;

# Recent activity
echo
echo &quot;¡ Recent Activity (Last 24 hours):&quot;
YESTERDAY=$(date -d '24 hours ago' -u +%Y-%m-%dT%H:%M:%S)
RECENT=$(curl -s &quot;https://oda.ft.dk/api/Sag?%24filter=opdateringsdato%20gt%20datetime'${YESTERDAY}'&amp;%24top=5&amp;%24orderby=opdateringsdato%20desc&quot;)

echo &quot;$RECENT&quot; | jq -r '.value[] | &quot;  &quot; \(.titel[0:50])... (ID: \(.id))&quot;'

# Topic analysis
echo
echo &quot;&lt;÷ Topic Analysis:&quot;
declare -A topics=(
    [&quot;klima&quot;]=&quot;Climate&quot;
    [&quot;sundhed&quot;]=&quot;Health&quot; 
    [&quot;økonomi&quot;]=&quot;Economy&quot;
    [&quot;uddannelse&quot;]=&quot;Education&quot;
)

for key in &quot;${!topics[@]}&quot;; do
    COUNT=$(curl -s &quot;https://oda.ft.dk/api/Sag?%24filter=substringof('${key}',%20titel)&amp;%24inlinecount=allpages&amp;%24top=1&quot; | jq -r '.&quot;odata.count&quot;')
    printf &quot;  %-12s: %s cases\n&quot; &quot;${topics[$key]}&quot; &quot;$COUNT&quot;
done
</code></pre>
<h2 id="performance-tips">Performance Tips</h2>
<pre><code class="language-bash"># Use compression for large responses
curl --compressed &quot;https://oda.ft.dk/api/Sag?%24top=100&quot;

# Parallel requests (be respectful - max 3-5 concurrent)
{
    curl -s &quot;https://oda.ft.dk/api/Sag?%24top=50&amp;%24skip=0&quot; &gt; page1.json &amp;
    curl -s &quot;https://oda.ft.dk/api/Sag?%24top=50&amp;%24skip=50&quot; &gt; page2.json &amp;
    curl -s &quot;https://oda.ft.dk/api/Sag?%24top=50&amp;%24skip=100&quot; &gt; page3.json &amp;
    wait
}

# Use HTTP/2 for better performance
curl --http2 &quot;https://oda.ft.dk/api/Sag?%24top=10&quot;

# Connection reuse for multiple requests
{
    echo &quot;url = \&quot;https://oda.ft.dk/api/Sag?%24top=10\&quot;&quot;
    echo &quot;url = \&quot;https://oda.ft.dk/api/Aktør?%24top=10\&quot;&quot;
    echo &quot;url = \&quot;https://oda.ft.dk/api/Afstemning?%24top=5\&quot;&quot;
} | curl --config -
</code></pre>
<h2 id="security-notes">Security Notes</h2>
<pre><code class="language-bash"># Always use HTTPS (the API enforces this)
curl &quot;https://oda.ft.dk/api/Sag?%24top=1&quot;  #  Secure

# Verify SSL certificate
curl --cacert /etc/ssl/certs/ca-certificates.crt &quot;https://oda.ft.dk/api/Sag?%24top=1&quot;

# Check TLS version
curl -v &quot;https://oda.ft.dk/api/Sag?%24top=1&quot; 2&gt;&amp;1 | grep &quot;TLS&quot;
</code></pre>
<h2 id="next-steps">Next Steps</h2>
<ol>
<li><strong><a href="basic-queries/">Basic Queries</a></strong> - Essential cURL patterns and examples</li>
<li><strong><a href="testing/">Testing Commands</a></strong> - API health checks and diagnostics</li>
</ol>
<p>cURL provides an excellent way to explore the Danish Parliament API, test queries, and build command-line tools for parliamentary data analysis.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
